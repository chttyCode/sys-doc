# browser

- 了解一些 browser 知识,以点串线，成网，站在更高的维度去审视问题
- 浏览器演进路线
  - JS 执行速度
    - 不断修订更新语言本身
    - webAssembly 编译脚本
  - 业务发展规模
    - webComponent 模块化
    - 框架模块化
  - 渲染效率
    - 布局方案
    - 渲染方案

## 宏观角度浏览器

### chrome 架构

- 优化 web 性能需要了解浏览器的网络请求、页面渲染、js 执行以及 web 安全，学习浏览器架构可以将这些知识串联起来，以点串线成网

- 浏览器架构的基础知识
  - 线程 vs 进程
    - 进程是软件运行的实例，是系统分配内存的最小单位，负责向系统申请存放运行时代码、保存运行变量的内存空间
    - 线程依赖进程，不能单独存在
    - 特点
      - 进程中任一线程执行出错，都会导致整个进程的崩溃
      - 线程之间共享进程中的数据
      - 进程关闭后系统会回收进程所占内存
      - 进程之间的内容相互隔离
  - 并发
    - 采用多线程同时执行
- 浏览器的演进
  - 单进程
    - 早期浏览器多线程运行在单一浏览器进程，包括插件线程、网络线程、渲染线程(处理 js 执行、html、css 渲染)
    - 问题：
      - 不稳定
        - 某一线程崩溃会引起浏览器进程崩溃
      - 不流畅
        - js 长任务执行会引起页面卡顿
      - 不安全
        - 浏览器能够获取系统资源、插件脚本也能够获取系统资源
  - 多进程
    - 插件进程、渲染进程、浏览器进程
      - 浏览器主进程：负责页面呈现、IPC 通信管理(主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。)
      - 渲染进程：浏览器会为每一个 tab 创建一个新的渲染进程，负责 js 执行、页面渲染
      - 插件进程：负责插件运行
      - GPU 进程：最初的目的是进行 3D 渲染，随后的页面、chromeUI 都采用 GPU
    - 解决了
      - 进程相互隔离，页面或插件崩溃不会影响浏览器主进程
      - 多进程可以采用沙箱隔离的方式，避免安全问题
      - 每个页面创建一个渲染进程，解决了不流畅的问题
    - 问题
      - 多进程带了庞大的资源开销
      - 架构更加复杂
  - 面向服务架构
    - 采用面向服务架构的思想、将以服务的方式重构以前的模块
      - 插件进程
      - 渲染进程
      - 基础服务进程
        - 网络进程
        - GPU 进程
        - UI 进程
    - 在低内存的设备上会合并基础服务到浏览器进程，降低内存开销

### TCP 协议

### http 请求

### 导航流程

### 渲染流程
