(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{366:function(s,t,a){"use strict";a.r(t);var e=a(44),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("ul",[a("li",[a("p",[s._v("style")]),s._v(" "),a("ul",[a("li",[s._v("全局样式定义\n"),a("ul",[a("li",[s._v("reset\n"),a("ul",[a("li",[s._v("https://github.com/shannonmoeller/reset-css/blob/master/sass/_reset.scss")])])]),s._v(" "),a("li",[s._v("mixin\n"),a("ul",[a("li",[s._v("定义工具函数")])])]),s._v(" "),a("li",[s._v("variables\n"),a("ul",[a("li",[s._v("定义项目变量")])])]),s._v(" "),a("li",[s._v("文件以下划线命名标识为代码片段，不会编辑成 css 文件")])])])])]),s._v(" "),a("li",[a("p",[s._v("component")]),s._v(" "),a("ul",[a("li",[s._v("props 类型定义\n"),a("ul",[a("li",[s._v("集成支持原生属性")]),s._v(" "),a("li",[s._v("集成支持原生属性")])])]),s._v(" "),a("li",[s._v("default 默认值设置")])])]),s._v(" "),a("li",[a("p",[s._v("storybook")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("配置")]),s._v(" "),a("ul",[a("li",[s._v("storybook 是一个用于开发 UI 组件的开源工具，是 UI 组件的开发环境")]),s._v(" "),a("li",[s._v("@storybook/react 是 React 的运行环境")]),s._v(" "),a("li",[s._v("@storybook/addon-essentials 是 storybook 最好插件的合集")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm i @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("react   @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("addon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("essentials @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("addon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("links @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("addon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("postcss @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("preset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("scss   @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("builder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack5 @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("manager"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack5   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("ul",[a("li",[a("p",[s._v("不支持 scss")]),s._v(" "),a("ul",[a("li",[s._v("https://www.npmjs.com/package/@storybook/preset-scss")])])]),s._v(" "),a("li",[a("p",[s._v("TypeError: this.getOptions is not a function")]),s._v(" "),a("ul",[a("li",[s._v("sass-loader 版本 vs webpack(storybook cli ) 版本冲突，尝试降级 sass-loader"),a("a",{attrs:{href:"https://www.ouyanting.com/archives/2021/12/e3ba245d.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("未能解决问题"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("手动升级 storybook 的 webpack 至 5")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm i  @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("builder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack5 @storybook"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("manager"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("webpack5   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n\n    core"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        builder"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'webpack5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n")])])])]),s._v(" "),a("li",[a("p",[s._v("script")])])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"storybook"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start-storybook -p 6006"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build-storybook"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build-storybook"')]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("支持的 story 格式")]),s._v(" "),a("ul",[a("li",[s._v("mdx 类似 jsx")]),s._v(" "),a("li",[s._v("*.tsx")])])])])]),s._v(" "),a("li",[a("p",[s._v("test")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("配置")]),s._v(" "),a("ul",[a("li",[s._v("https://jestjs.io/docs/configuration")]),s._v(" "),a("li",[s._v("jest 是一个令人愉快的 JavaScript 测试框架")]),s._v(" "),a("li",[s._v("Enzyme 用于 React 的 JS 测试工具")]),s._v(" "),a("li",[s._v("puppeteer 是一个控制 headless Chrome 的 Node.js API")]),s._v(" "),a("li",[s._v("jest-image-snapshot 执行图像比较的 Jest 匹配器,对于视觉回归测试非常有用")]),s._v(" "),a("li",[s._v("sinon 提供测试工具函数"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000010372634",target:"_blank",rel:"noopener noreferrer"}},[s._v("sinon"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("chai equal、a/an、ok、match 工具函数的断言库")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("   npm i  jest @types"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jest  @wojtekmaj"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("enzyme"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("adapter"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("react"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" puppeteer@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),s._v(" @types"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("puppeteer jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("puppeteer  @types"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("puppeteer jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("puppeteer  jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("snapshot @types"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("snapshot  enzyme  @types"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("enzyme   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("ignore"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("scripts   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v("\n")])])]),a("ul",[a("li",[a("p",[s._v("e2e")]),s._v(" "),a("ul",[a("li",[s._v('ERROR: Failed to set up Chromium r938248! Set "PUPPETEER_SKIP_DOWNLOAD" env variable to skip download.')])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm i puppeteer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("ignore"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("scripts\n")])])]),a("p",[s._v("或.npmrc")]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PUPPETEER_SKIP_DOWNLOAD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("ul",[a("li",[s._v("error"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    Error"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Got error running globalSetup "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Users\\k00557313\\Desktop\\Tmp\\reactTmp\\node_modules\\jest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("environment"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("puppeteer\\setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reason"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Could not find expected "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("browser")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" locally"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" Run "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("npm install")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v(" to download the correct Chromium "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("revision")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("938248")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n")])])]),a("ul",[a("li",[s._v("解决方案\n"),a("ul",[a("li",[s._v("设置 npm 源")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm config "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" puppeteer_download_host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npmmirror"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n    npm i puppeteer\n")])])]),a("ul",[a("li",[s._v("使用 cnpm")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("npm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g cnpm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npmmirror"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\ncnpm i puppeteer\n")])])]),a("ul",[a("li",[s._v("手动操作\n"),a("ul",[a("li",[s._v("设置.nrmrc PUPPETEER_SKIP_DOWNLOAD 跳过 puppeteer")]),s._v(" "),a("li",[s._v("下载"),a("a",{attrs:{href:"https://npm.taobao.org/mirrors/chromium-browser-snapshots/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chromium 镜像"),a("OutboundLink")],1),s._v("/"),a("a",{attrs:{href:"https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Chromium"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("默认路劲设置\n"),a("ul",[a("li",[s._v("node_modules/puppeteer/.local-chromium/win64-938248(系统类型-版本号)/chrome-win(解压下载的文件名)")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("C")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\\Users\\k00557313\\Desktop\\Tmp\\reactTmp\\node_modules\\puppeteer\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("chromium\\win64"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("938248")]),s._v("\\chrome"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("win\n")])])]),a("ul",[a("li",[s._v("版本号来自 puppeteer")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    node_modules\\puppeteer\\lib\\cjs\\puppeteer\\node\\install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("js")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("node_modules\\puppeteer\\lib\\cjs\\puppeteer\\revisions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])])])]),s._v(" "),a("li",[s._v("调用设置 executablePath 参数"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("puppeteer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("launch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" executablePath"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ChromiumExePath'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])])])])])])])])]),s._v(" "),a("li",[a("p",[s._v("unit")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Enzyme vs @testing-library/react")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("概念差异")]),s._v(" "),a("ul",[a("li",[s._v("Enzyme 使用 state、props 来测，组件变更会引起 test 失败")]),s._v(" "),a("li",[s._v("@testing-library/react 从与用户的交互角度来测试，使用 DOM 来测试")])])]),s._v(" "),a("li",[a("p",[s._v("渲染差异")]),s._v(" "),a("ul",[a("li",[s._v("@testing-library/react 通过全量 dom 来测试，不存再深浅测试")]),s._v(" "),a("li",[s._v("Enzyme 可以选择深浅测试，浅渲染即不渲染子组件")])])]),s._v(" "),a("li",[a("p",[s._v("使用方式")]),s._v(" "),a("ul",[a("li",[s._v("Enzyme 不仅可以测试 dom 还可测试状态即 state、props")]),s._v(" "),a("li",[s._v("@testing-library/react 只能通过 dom")])])]),s._v(" "),a("li",[a("p",[s._v("设置")]),s._v(" "),a("ul",[a("li",[s._v("不同版本 React 需兼容")])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Enzyme "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enzyme'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" Adapter "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'enzyme-adapter-react-16'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nEnzyme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("configure")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" adapter"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Adapter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])]),s._v(" "),a("li",[a("p",[s._v("按需选择即可")])])])])])])])])])]),s._v(" "),a("li",[a("p",[s._v("publish")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);